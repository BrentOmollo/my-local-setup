name: My Windows CI/CD

on:
  push:
    branches: [ main ]
  workflow_dispatch:    # adds the "Run workflow" button

jobs:
  build-and-test:
    runs-on: windows-latest   # ← important!

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Say hello (test the workflow itself)
        run: echo "Workflow is running on Windows!"
      - name: Show the batch file content
        shell: cmd  # ← Add this line
        run: type hello.bat

      - name: Run my batch script (and fail workflow if it errors)
        shell: cmd
        run: |
          call make-hello.bat
          if %errorlevel% neq 0 exit /b %errorlevel%
      - name: Create backup zip of all scripts
        run: powershell Compress-Archive -Path *.bat, README.md -DestinationPath My-Local-Setup-Latest.zip

      - name: Upload the zip (so you can download it)
        uses: actions/upload-artifact@v4
        with:
          name: My-Local-Setup-Latest
          path: My-Local-Setup-Latest.zip
